(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{2567:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return n(3051)}])},3051:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});var a=n(5893),i=n(6979),s=n(204),o=n(7006),r=n(8911),p=n(9222),l=n(1686),u=n(1652),y={src:"/_next/static/media/approve_block.6fbe7518.png",height:1962,width:2029,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA+ElEQVR42mN43PRL53L2a5lNDGe4GRgYmBgQgHlRzBZGhm+z/zv83/bf6v+W/5b/l//X/L/5v+T////ZGGBgc9nhptrk1guNqZ2nipxrDxQ7Nhwqdqw/FqGftKjNa4oww7LYHX1BcrGPw5SSbkXqpdyN1E++HWmY/DjZLO/k1OBl/AzXu16VHOq+OONIz6UpR/ouTz/QdKF/V+bZ7p3Zp0vLLFpZGA7kX+mcEDz/4KSQhbuBeA+I7g+ct3d2xOpt58ofyzO87fyf92PC/7zv/f9zYRjIz/7a97/kZft/S4anLX8THjX9ygJ6NwNIZz6C0kB+8rOWf9oARnSK06w0EfMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},d={src:"/_next/static/media/approve_button.d697bc84.png",height:244,width:901,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATUlEQVR4nGP8/vBfH7sII+/rF+9YP3z4wM7KyvpPVFTkOxcPJ+Ovt/9fMH5/9K+aXZhR8cXT1yzPnj3n5ubm+iMpJfmVl4+b8de7/1cBBPUepWRJvvQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},c={src:"/_next/static/media/choose_block.65ecc311.png",height:2361,width:1602,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAAqUlEQVR4nGP8t/O/OaMIw2+G/0D8geGxe5nPB8ZJyfMWX397yYKdkeP760dvmf7+/juVMcUw/9ic8xMtGaDAWdl7DmORY92BvoNN9goCKt+/f//GaSxrMZExw7Tk9IzTPSZARWBgLGk5g3FVzq6Fd57fVGNjY/v55/sfLn5WwZWMn2b8L2JjYWBlYATa/4uB8edXhqeMjxt+p/z//58DqPMfUIKZkZnxDgBytUNeJmmUrQAAAABJRU5ErkJggg==",blurWidth:5,blurHeight:8},m={src:"/_next/static/media/confirm_button.57653844.png",height:244,width:901,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAARElEQVR4nGP8/vBfB5swo8jnj18ZX754ycUABFLSUl+5uDkYfr37/xamQPjThy+MTx494WFkYmSQkZX5wsvHzQhUcBMAyzocrqWtvrQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},x={src:"/_next/static/media/staking_header.a778f382.png",height:351,width:1672,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAAQElEQVR42gXAuw1AQBgA4O/QKCQ6YlAb2M8OCtFpLheP+CXtyzfXvbXqDM8mN6NJaN+TKPYGGXdQhAtFEgnB8QMPfxaGX5AbeQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2},b={src:"/_next/static/media/supply_rate_header.a284f3d3.png",height:487,width:1886,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASElEQVR4nGN8OelfM5sSw5V/3xgE/v9hYGP4w8ABpDn+vmP49e8HAwvj845/VUycDIf//2UQYvjPwM7wj4EDhIF8rv//GR4AAPorHZ9ug7JCAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2},f={src:"/_next/static/media/total_header.bce2551e.png",height:487,width:1936,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASUlEQVR4nA3KMQ5AQBRF0fs1M2Qi9mCROrXOtvQ6G6BRaCRkvG/6Y8esMfRsukk4TT55dSGMzp3H9klDFVk80wI1H8FFLDgVsP7m3xyIH+WY/wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2},g=n(7294),h=n(260),A=n(5091),T=n(7583);let w=[{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"uint256",name:"_duration",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_nft",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_staker",type:"address"}],name:"getAllStake",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_staker",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getStake",outputs:[{components:[{internalType:"bool",name:"isStaking",type:"bool"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],internalType:"struct NFTStaking.Stake",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"Stakes",outputs:[{internalType:"bool",name:"isStaking",type:"bool"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"UserTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],k=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"prevOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"currency",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"collectMistakeCurrency",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInfo",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialDate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"string",name:"baseURI_",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"string",name:"_uri",type:"string"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_tos",type:"address[]"},{internalType:"string[]",name:"_uris",type:"string[]"}],name:"mintToBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"froms",type:"address[]"},{internalType:"address[]",name:"tos",type:"address[]"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_baseUri",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_uri",type:"string"}],name:"setUri",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],v=()=>{let{setSTAKE:e,setERC721:t}=(0,g.useContext)(h.ContractContext),{setSigner:n,setStatus:a,setAccount:i}=(0,g.useContext)(h.AccountContext),s=async()=>{let a=new A.Q(window.ethereum),i=await a.getSigner();n(i);let s=new T.CH("0x9288244f5570269cB0958b07f205E3C0035c6067",k,i),o=new T.CH("0x689c13d9c82709707c263510F29A4aC6FdC29339",w,i);return e(o),t(s),i},o=async()=>{if(null==window?void 0:window.ethereum)try{a("isConnecting");let e=await window.ethereum.request({method:"eth_requestAccounts"}),t=await s();console.log(t);let n=await fetch("http://13.115.250.186/api/getMessage",{method:"POST",body:JSON.stringify({address:e[0]}),headers:{"Content-Type":"application/json"}}),o=await n.json(),r=await t.signMessage(o.message),p=await fetch("http://13.115.250.186/api/sign-in",{method:"POST",body:JSON.stringify({address:e[0],signature:r}),credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}});await p.json(),i(e[0]),a("isConnected")}catch(e){console.log(e),a("isDisconnected")}else window.open("https://metamask.app.link/dapp/".concat(null==window?void 0:window.location.host,"/stake"),"_blank").focus(),a("isDisconnected")},r=()=>{i(),a("isDisconnected")};return{connect:o,disconnect:r}};var C=n(7848);let j=()=>{let{account:e}=(0,g.useContext)(h.AccountContext);return(0,C.a)(["getTotalStake",e],async()=>{let e=await fetch("http://13.115.250.186/api/getTotalStake",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();return t.num})},S=()=>{let{account:e}=(0,g.useContext)(h.AccountContext),{ERC721:t}=(0,g.useContext)(h.ContractContext);return(0,C.a)(["getTotalNFT",e],async()=>{if(!t)return 0;let e=await t.totalSupply();return e.toString()})},I=()=>{let{account:e}=(0,g.useContext)(h.AccountContext);return(0,C.a)(["getAllStake",e],async()=>{let e=await fetch("http://13.115.250.186/api/getAllStake",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();return null==t?void 0:t.allStake})},M=()=>{let{account:e}=(0,g.useContext)(h.AccountContext);return(0,C.a)(["allNFT",e],async()=>{let e=await fetch("http://13.115.250.186/api/getAllNFT",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();console.log(null==t?void 0:t.nfts);let n=null==t?void 0:t.nfts.sort((e,t)=>Number(e.tokenId)-Number(t.tokenId));return n})},E={1:20,2:69,3:169},R=e=>e>=12?4:e>=11?3.75:e>=10?3.5:e>=9?3.25:e>=8?3:e>=7?2.75:e>=6?2.5:e>=5?2.25:e>=4?2:e>=3?1.75:e>=2?1.5:e>=1?1.25:0,F=(e,t)=>E[t]*R(e)*30,_=(e,t)=>30*E[t]*R(e)*e;var D=n(3100);let U=e=>{let{...t}=e;return(0,a.jsx)(s.k,{position:"absolute",w:"6px",h:"6px",borderRadius:"50%",backgroundColor:"#E686FF",zIndex:2,justifyContent:"center",alignItems:"center",...t,children:(0,a.jsx)(D.xu,{w:"2px",h:"2px",borderRadius:"50%",m:"auto",backgroundColor:"rgba(0, 0, 0, 0.5)"})})},z=()=>(0,a.jsxs)(s.k,{position:"absolute",top:"0px",h:"70px",w:"350px",children:[(0,a.jsx)(D.xu,{id:"pink",w:"350px",h:"50px",backgroundColor:"#E686FF",position:"absolute",top:"0",left:"0"}),(0,a.jsx)(D.xu,{id:"pink",w:"350px",h:"0",borderTop:"20px solid #E686FF",borderRight:"30px solid transparent",position:"absolute",top:"50px",left:"0px"}),(0,a.jsx)(D.xu,{id:"pink",w:"3px",h:"50px",position:"absolute",backgroundColor:"#E686FF",top:"10px",left:"10px",zIndex:1}),(0,a.jsx)(D.xu,{id:"mask",w:"338px",h:"46px",backgroundColor:"rgba(0, 0, 0, 0.5)",position:"absolute",top:"2px",left:"10px"}),(0,a.jsx)(D.xu,{id:"mask",w:"338px",h:"0",borderTop:"20px solid rgba(0, 0, 0, 0.5)",borderRight:"30px solid transparent",position:"absolute",top:"48px",left:"10px"}),(0,a.jsx)(U,{right:"7px",top:"10px"}),(0,a.jsx)(U,{right:"7px",top:"20px"})]});var B=n(8228);let O=()=>{let{account:e}=(0,g.useContext)(h.AccountContext),{ERC721:t,STAKE:n}=(0,g.useContext)(h.ContractContext),a=(0,B.D)(async()=>{if(t&&n&&e)try{let a=await n.getAddress(),i=await t.isApprovedForAll(e,a);if(i)return!0;let s=await t.setApprovalForAll(a,!0);return await s.wait(),!0}catch(e){throw console.log(e),e}});return a},N=e=>{let{tokenId:t,month:n}=e,{STAKE:a}=(0,g.useContext)(h.ContractContext),{account:i,setStatus:s,setAccount:o}=(0,g.useContext)(h.AccountContext),r=(0,B.D)(async()=>{if(a&&i)try{let e=await a.getStake(i,t);console.log(e);let r=e[0];if(!r){let e=await a.stake(t,n),i=await e.wait();console.log(i)}let p=await fetch("http://13.115.250.186/api/stake",{method:"POST",credentials:"include",body:JSON.stringify({tokenId:t}),headers:{"Content-Type":"application/json"}});console.log(p);let l=await p.json();return(null==l?void 0:l.err)==="no user found"&&(o(""),s("isDisconnected"),alert("Your auth has expired")),l}catch(e){throw console.log(e),e}});return(0,g.useEffect)(()=>{r.isSuccess&&r.reset()},[r,r.isSuccess]),{...r}},G=()=>{let{STAKE:e}=(0,g.useContext)(h.ContractContext),{account:t}=(0,g.useContext)(h.AccountContext),n=(0,B.D)(async n=>{let{tokenId:a}=n;if(!(!e||!t||isNaN(Number(a))))try{let n=await e.getStake(t,a);console.log(n);let i=n[0];if(console.log(i),i)try{let t=await e.unstake(a),n=await t.wait();console.log(n)}catch(e){throw(null==e?void 0:e.code)!=="ACTION_REJECTED"&&alert("Stake has not ended"),"User rejected"}let s=await fetch("http://13.115.250.186/api/getStakeReward",{method:"POST",credentials:"include",body:JSON.stringify({tokenId:a}),headers:{"Content-Type":"application/json"}}),o=await s.json();return console.log(o),!0}catch(e){throw console.log(e),"User rejected"}});return(0,g.useEffect)(()=>{n.isSuccess&&n.reset()},[n,n.isSuccess]),{...n}},W=()=>{let{account:e}=(0,g.useContext)(h.AccountContext);return(0,C.a)(["getUserPoint",e],async()=>{let e=await fetch("http://13.115.250.186/api/getUserPoint",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();return t.point})},P=e=>{let{isOpen:t,onClose:n,body:i,isReady:o,isAlert:l}=e,{signer:y}=(0,g.useContext)(h.AccountContext);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.k,{display:t?"flex":"none",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"300px",height:"250px",flexDirection:"column",border:"1px solid #E686FF",bgColor:"rgba(230, 134, 255, 0.5)",color:"#E686FF",alignItems:"center",zIndex:50,borderRadius:"16px",children:[(0,a.jsx)(r.x,{fontSize:"28px",textAlign:"center",my:"50px",children:o&&!l?"Success":i}),!o&&(0,a.jsx)(u.$,{boxSize:"22px",color:"#E686FF"}),o&&(0,a.jsx)(p.z,{borderWidth:"0px",fontSize:"16px",px:"16px",py:"8px",borderRadius:"8px",fontWeight:"600",border:"1px solid #E686FF",color:"#E686FF",bgColor:"rgba(230, 134, 255, 0.1)",_hover:{bgColor:"rgba(230, 134, 255, 0.3)"},cursor:"pointer",onClick:async()=>{let e=await ethereum.request({method:"eth_chainId"});"80001"===Number(e).toString()&&n()},children:"OK"})]}),(0,a.jsx)(D.xu,{display:t?"block":"none",bg:"rgba(0, 0, 0, 0.1)",backdropFilter:"blur(25px)",position:"fixed",top:"0",left:"0",width:"150vw",height:"150vh",zIndex:40})]})},Q=()=>{let[e,t]=(0,g.useState)(0);return(0,g.useEffect)(()=>{let e=e=>{t(e.target.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[e]),(0,g.useEffect)(()=>{t(window.innerWidth)},[]),{screenWidth:e,isMobile:e<800}},V={color:"#E686FF",fontSize:"20px",fontWeight:"600"},Y=()=>{let{isMobile:e,screenWidth:t}=Q(),{account:n,status:A}=(0,g.useContext)(h.AccountContext),{connect:T}=v(),[w,k]=(0,g.useState)(!1),[C,E]=(0,g.useState)(-1),[D,U]=(0,g.useState)(""),[B,Y]=(0,g.useState)({}),[L,J]=(0,g.useState)(!1),[K,H]=(0,g.useState)(""),[X,Z]=(0,g.useState)(!1),[q,$]=(0,g.useState)(!1),[ee,et]=(0,g.useState)(1),[en,ea]=(0,g.useState)(1),{data:ei,refetch:es}=j(),{data:eo,refetch:er}=S(),{data:ep,refetch:el}=I(),{data:eu,refetch:ey}=M(),{data:ed,refetch:ec}=W(),{mutate:em,data:ex,isError:eb}=O(),{mutate:ef,data:eg,isError:eh}=N({tokenId:B.tokenId,month:B.month}),{mutate:eA,data:eT,isError:ew}=G();return(0,g.useEffect)(()=>{eb&&(H(""),J(!1),$(!1))},[eb]),(0,g.useEffect)(()=>{eh&&(H(""),J(!1),$(!1))},[eh]),(0,g.useEffect)(()=>{ew&&(H(""),J(!1),$(!1))},[ew]),(0,g.useEffect)(()=>{(async()=>{if(ex)try{ef()}catch(e){console.log(e)}})()},[ex,ef]),console.log(null==ep?void 0:ep.endTime),console.log(new Date(Date.parse(null==ep?void 0:ep.stakingEndDate)).toLocaleString()),(0,g.useEffect)(()=>{eg&&(console.log(eg),es(),el(),ey(),er(),Y({}),E(-1),U(""),$(!0)),eT&&(console.log(eT),es(),el(),ey(),er(),ec(),$(!0))},[eg,eT]),console.log(eu),console.log(ep),console.log(eo),(0,g.useEffect)(()=>{"isConnected"===A&&k(!0),"isConnected"!==A&&k(!1)},[A]),(0,g.useEffect)(()=>{let e=e=>{"80001"!==e.toString()&&(H("Wrong chain. Please switch to Mumbai"),Z(!0),$(!0),J(!0))};(null==window?void 0:window.ethereum)&&window.ethereum.on("chainChanged",e)},[]),(0,a.jsxs)(a.Fragment,{children:[w?(0,a.jsx)(i.W,{maxW:"1440px",m:"0 auto",pt:e?"100px":"150px",mb:"86px",children:(0,a.jsxs)(s.k,{w:"100%",columnGap:"30px",justifyContent:"center",flexDirection:e?"column":"row",rowGap:"50px",children:[(0,a.jsxs)(s.k,{flexDirection:"column",alignItems:"center",children:[(0,a.jsxs)(s.k,{position:"relative",w:"330px",flexDirection:"column",justifyContent:"center",children:[(0,a.jsx)(o.E,{src:f.src,alt:""}),(0,a.jsx)(r.x,{position:"absolute",top:"35px",left:"31px",zIndex:2,fontSize:"30px",color:"#E686FF",fontWeight:"1000",m:"0",children:null!=ei?ei:0})]}),(0,a.jsxs)(s.k,{mt:e?"30px":"50px",position:"relative",w:"400px",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.E,{w:"330px",src:x.src,alt:""}),(0,a.jsx)(s.k,{flexDirection:"column",rowGap:"10px",children:Array.isArray(ep)&&ep.length>0&&ep.map((e,t)=>{let{tokenId:n,endTime:i}=e,o=Date.now()>new Date(Date.parse(i));return(0,a.jsxs)(s.k,{alignItems:"center",children:[(0,a.jsxs)(r.x,{color:"#E686FF",fontSize:"20px",ml:"22px",fontWeight:"600",children:["#",n]}),!o&&(0,a.jsx)(r.x,{color:"#E686FF",w:"100px",fontSize:"20px",fontWeight:"600",ml:"76px",flexShrink:"0",children:new Date(Date.parse(i)).toLocaleString()}),o&&(0,a.jsx)(p.z,{ml:"100px",borderWidth:"0px",fontSize:"14px",px:"12px",py:"6px",borderRadius:"6px",fontWeight:"600",border:"1px solid #E686FF",color:"#E686FF",bgColor:"rgba(230, 134, 255, 0.5)",cursor:"pointer",onClick:()=>{eA({tokenId:n}),J(!0),H("Unlock your NFT...")},children:"Unlock"})]},t)})})]}),(0,a.jsxs)(s.k,{mt:e?"30px":"50px",position:"relative",w:"400px",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.E,{w:"330px",src:c.src,alt:""}),(0,a.jsx)(s.k,{w:"263px",h:"254px",left:"64px",top:"81px",pl:"10px",py:"10px",position:"absolute",flexDirection:"column",rowGap:"10px",overflow:"auto",children:Array.isArray(eu)&&eu.length>0&&eu.map(e=>{var t,n,i;let{media:p,tokenId:u,rawMetadata:y}=e,d=null!==(i=null===(t=p[0])||void 0===t?void 0:t.thumbnail)&&void 0!==i?i:null===(n=p[0])||void 0===n?void 0:n.gateway,c=y.attributes,m=1;return c.forEach(e=>{"Font"===e.trait_type&&(m=2),"Special Edition"===e.trait_type&&(m=3)}),(0,a.jsxs)(s.k,{alignItems:"center",children:[(0,a.jsx)(l.I,{type:"checkbox",checked:C===u,onInput:()=>{C===u?(E(-1),U(""),ea(1)):(E(u),U(d),ea(m))}}),(0,a.jsx)(o.E,{src:d,ml:"15px",width:"50px",height:"50px",alt:""}),(0,a.jsxs)(r.x,{ml:"30px",...V,children:["#",u]}),(0,a.jsx)(r.x,{ml:"60px",...V,fontSize:"16px",children:C===u&&"Select"})]},u)})}),(0,a.jsxs)(r.x,{position:"absolute",left:"128px",bottom:"119px",fontWeight:"800",color:"rgb(200, 200, 200)",fontSize:"12px",children:[ee," month","1"!==ee?"s":""]}),(0,a.jsx)(r.x,{position:"absolute",left:"230px",bottom:"119px",fontWeight:"800",color:"rgb(200, 200, 200)",fontSize:"12px",children:R(ee)}),(0,a.jsx)(l.I,{type:"range",min:"1",step:"1",max:"12",position:"absolute",width:"260px",left:"57px",bottom:"90px",value:ee,onInput:e=>{et(e.target.value)}}),(0,a.jsx)(o.E,{_hover:{transform:"scale(1.05)"},cursor:"pointer",position:"absolute",bottom:"40px",left:"56px",width:"180px",src:m.src,alt:"",onClick:()=>{e&&document.querySelector("#confirm").scrollIntoView({behavior:"smooth"}),Y({tokenId:C,image:D,month:ee,total:_(ee,en),point:F(ee,en),weight:R(ee)})}})]})]}),(0,a.jsxs)(s.k,{flexDirection:"column",alignItems:"center",id:"confirm",children:[(0,a.jsxs)(s.k,{position:"relative",w:"330px",flexDirection:"column",justifyContent:"center",children:[(0,a.jsx)(o.E,{src:b.src,alt:""}),(0,a.jsxs)(r.x,{position:"absolute",top:"35px",left:"31px",zIndex:2,fontSize:"30px",color:"#E686FF",fontWeight:"1000",m:"0",children:[eo?(ei/eo*100).toFixed(2):0," %"]})]}),(0,a.jsxs)(s.k,{mt:e?"30px":"50px",position:"relative",w:"330px",flexDirection:"column",justifyContent:"center",children:[(0,a.jsx)(o.E,{src:y.src,alt:""}),B.tokenId>=0&&(0,a.jsxs)(s.k,{w:"250px",h:"49px",left:"27px",top:"99px",position:"absolute",alignItems:"center",columnGap:"20px",pl:"5px",...V,children:[(0,a.jsxs)(r.x,{children:["#",B.tokenId]}),(0,a.jsx)(o.E,{width:"50px",height:"50px",src:B.image,alt:""}),(0,a.jsxs)(s.k,{flexDirection:"column",fontSize:"14px",whiteSpace:"nowrap",children:[(0,a.jsxs)(r.x,{children:["Month: ",B.month]}),(0,a.jsxs)(r.x,{children:["Weight: ",B.weight]})]}),(0,a.jsxs)(r.x,{fontSize:"14px",children:["Point: ",B.total]})]}),B.tokenId>=0&&(0,a.jsx)(s.k,{w:"245px",h:"23px",left:"27px",top:"193px",position:"absolute",alignItems:"center",pl:"5px",...V,children:(0,a.jsx)(r.x,{fontSize:"14px",children:B.point})}),(0,a.jsx)(o.E,{_hover:{transform:"scale(1.05)"},cursor:"pointer",position:"absolute",bottom:"38px",left:"66px",width:"180px",src:d.src,alt:"",onClick:()=>{em(),J(!0),H("Staking your NFT...")}})]}),(0,a.jsxs)(s.k,{flexDirection:"column",p:"10px",...V,fontSize:"14px",children:[(0,a.jsx)(r.x,{children:"Account:"}),(0,a.jsx)(r.x,{children:n}),(0,a.jsxs)(r.x,{children:["Point: ",ed]})]})]})]})}):(0,a.jsx)(s.k,{maxW:"1440px",m:"auto",h:"calc(100vh - 106px)",alignItems:"center",justifyContent:"center",children:(0,a.jsxs)(p.z,{w:"330px",h:"70px",borderRadius:"16px",fontSize:"20px",fontWeight:"800",bgColor:"transparent",color:"rgb(200, 200, 200)",borderWidth:"0px",cursor:"isConnecting"===A?"default":"pointer",_hover:{filter:"isConnecting"===A?"brightness(1)":"brightness(1.1)"},onClick:T,isDisabled:"isConnecting"===A,children:["isConnecting"===A?(0,a.jsxs)(s.k,{zIndex:"1",alignItems:"center",columnGap:"16",children:[(0,a.jsx)(r.x,{fontSize:"18px",children:"Check on your Metamask"}),(0,a.jsx)(u.$,{boxSize:"16px"})]}):(0,a.jsx)(r.x,{zIndex:"1",children:"Connect with Metamask"}),(0,a.jsx)(z,{})]})}),(0,a.jsx)(P,{isOpen:L,onClose:()=>{J(!1),$(!1),Z(!1)},body:K,isReady:q,isAlert:X})]})},L=()=>(0,a.jsx)(Y,{});var J=L},5856:function(){}},function(e){e.O(0,[328,774,888,179],function(){return e(e.s=2567)}),_N_E=e.O()}]);