(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{2567:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stake",function(){return n(4545)}])},9:function(e,t,n){"use strict";var a=n(5893),i=n(204),s=n(3100);let o=e=>{let{...t}=e;return(0,a.jsx)(i.k,{position:"absolute",w:"6px",h:"6px",borderRadius:"50%",backgroundColor:"#E686FF",zIndex:2,justifyContent:"center",alignItems:"center",...t,children:(0,a.jsx)(s.xu,{w:"2px",h:"2px",borderRadius:"50%",m:"auto",backgroundColor:"rgba(0, 0, 0, 0.5)"})})},r=()=>(0,a.jsxs)(i.k,{position:"absolute",top:"0px",h:"70px",w:"350px",children:[(0,a.jsx)(s.xu,{id:"pink",w:"350px",h:"50px",backgroundColor:"#E686FF",position:"absolute",top:"0",left:"0"}),(0,a.jsx)(s.xu,{id:"pink",w:"350px",h:"0",borderTop:"20px solid #E686FF",borderRight:"30px solid transparent",position:"absolute",top:"50px",left:"0px"}),(0,a.jsx)(s.xu,{id:"pink",w:"3px",h:"50px",position:"absolute",backgroundColor:"#E686FF",top:"10px",left:"10px",zIndex:1}),(0,a.jsx)(s.xu,{id:"mask",w:"338px",h:"46px",backgroundColor:"rgba(0, 0, 0, 0.5)",position:"absolute",top:"2px",left:"10px"}),(0,a.jsx)(s.xu,{id:"mask",w:"338px",h:"0",borderTop:"20px solid rgba(0, 0, 0, 0.5)",borderRight:"30px solid transparent",position:"absolute",top:"48px",left:"10px"}),(0,a.jsx)(o,{right:"7px",top:"10px"}),(0,a.jsx)(o,{right:"7px",top:"20px"})]});t.Z=r},3924:function(e,t,n){"use strict";var a=n(7294);let i=()=>{let[e,t]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=e=>{t(e.target.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[e]),(0,a.useEffect)(()=>{t(window.innerWidth)},[]),{screenWidth:e,isMobile:e<800}};t.Z=i},4545:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var a=n(5893),i=n(6979),s=n(204),o=n(7006),r=n(8911),p=n(1686),l=n(9222),u=n(1652),y={src:"/_next/static/media/approve_block.bcd62fca.png",height:2744,width:1753,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAAo0lEQVR42mP4Nfm/2v+b/9kYkMGpzttpuzqO163M2JlUYt3omO9UxctQ5Fi3j4GB4b8iv+p/bRGD//HGmQ4MZc7Nu0GCHGwcP6V55IGCWXYMxXYNh0GCIMzLIPi/zWdKAMOq3J3LWuMmXO1MmnKuI2TqxX3Zl0IZTlXc699ZcGbp7sJzC/fmXVhyp/5zCsOb9v8Z7zv+ZwNx5rvO/3kv2/57AQD9TEq8oncQ8wAAAABJRU5ErkJggg==",blurWidth:5,blurHeight:8},d={src:"/_next/static/media/approve_button.d697bc84.png",height:244,width:901,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATUlEQVR4nGP8/vBfH7sII+/rF+9YP3z4wM7KyvpPVFTkOxcPJ+Ovt/9fMH5/9K+aXZhR8cXT1yzPnj3n5ubm+iMpJfmVl4+b8de7/1cBBPUepWRJvvQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},c={src:"/_next/static/media/choose_block.65ecc311.png",height:2361,width:1602,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAICAYAAAAx8TU7AAAAqUlEQVR4nGP8t/O/OaMIw2+G/0D8geGxe5nPB8ZJyfMWX397yYKdkeP760dvmf7+/juVMcUw/9ic8xMtGaDAWdl7DmORY92BvoNN9goCKt+/f//GaSxrMZExw7Tk9IzTPSZARWBgLGk5g3FVzq6Fd57fVGNjY/v55/sfLn5WwZWMn2b8L2JjYWBlYATa/4uB8edXhqeMjxt+p/z//58DqPMfUIKZkZnxDgBytUNeJmmUrQAAAABJRU5ErkJggg==",blurWidth:5,blurHeight:8},m={src:"/_next/static/media/confirm_button.57653844.png",height:244,width:901,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAARElEQVR4nGP8/vBfB5swo8jnj18ZX754ycUABFLSUl+5uDkYfr37/xamQPjThy+MTx494WFkYmSQkZX5wsvHzQhUcBMAyzocrqWtvrQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},x={src:"/_next/static/media/staking_header.a778f382.png",height:351,width:1672,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAAQElEQVR42gXAuw1AQBgA4O/QKCQ6YlAb2M8OCtFpLheP+CXtyzfXvbXqDM8mN6NJaN+TKPYGGXdQhAtFEgnB8QMPfxaGX5AbeQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2},h={src:"/_next/static/media/supply_rate_header.a284f3d3.png",height:487,width:1886,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASElEQVR4nGN8OelfM5sSw5V/3xgE/v9hYGP4w8ABpDn+vmP49e8HAwvj845/VUycDIf//2UQYvjPwM7wj4EDhIF8rv//GR4AAPorHZ9ug7JCAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2},b={src:"/_next/static/media/total_header.bce2551e.png",height:487,width:1936,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASUlEQVR4nA3KMQ5AQBRF0fs1M2Qi9mCROrXOtvQ6G6BRaCRkvG/6Y8esMfRsukk4TT55dSGMzp3H9klDFVk80wI1H8FFLDgVsP7m3xyIH+WY/wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2},g=n(7294),f=n(260),A=n(5091),T=n(7583);let w=[{inputs:[{internalType:"address",name:"_nft",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"Stakes",outputs:[{internalType:"bool",name:"isStaking",type:"bool"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"month",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"UserTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_staker",type:"address"}],name:"getAllStakes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_staker",type:"address"},{internalType:"uint256[]",name:"_tokenId",type:"uint256[]"}],name:"getStakes",outputs:[{components:[{internalType:"bool",name:"isStaking",type:"bool"},{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"month",type:"uint256"}],internalType:"struct NFTStaking.Stake[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_tokenId",type:"uint256[]"},{internalType:"uint256",name:"month",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_tokenId",type:"uint256[]"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"}],k=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newRoyaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"newRoyaltyBps",type:"uint256"}],name:"DefaultRoyalty",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"prevOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"royaltyRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"royaltyBps",type:"uint256"}],name:"RoyaltyForToken",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"burnBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"currency",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"collectMistakeCurrency",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractType",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractVersion",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDefaultRoyaltyInfo",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInfo",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getRoyaltyInfoForToken",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialDate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_defaultAdmin",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_contractURI",type:"string"},{internalType:"address[]",name:"_trustedForwarders",type:"address[]"},{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint128",name:"_royaltyBps",type:"uint128"},{internalType:"string",name:"baseURI_",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"forwarder",type:"address"}],name:"isTrustedForwarder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"string",name:"_uri",type:"string"}],name:"mintTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_tos",type:"address[]"},{internalType:"string[]",name:"_uris",type:"string[]"}],name:"mintToBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenIdToMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"froms",type:"address[]"},{internalType:"address[]",name:"tos",type:"address[]"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_baseUri",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_royaltyRecipient",type:"address"},{internalType:"uint256",name:"_royaltyBps",type:"uint256"}],name:"setDefaultRoyaltyInfo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newOwner",type:"address"}],name:"setOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"address",name:"_recipient",type:"address"},{internalType:"uint256",name:"_bps",type:"uint256"}],name:"setRoyaltyInfoForToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_uri",type:"string"}],name:"setUri",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],v=()=>{let{setSTAKE:e,setERC721:t}=(0,g.useContext)(f.ContractContext),{setSigner:n,setStatus:a,setAccount:i}=(0,g.useContext)(f.AccountContext),s=async()=>{let a=new A.Q(window.ethereum),i=await a.getSigner();n(i);let s=new T.CH("0x3D4E1DbaCf05e34d21Fd0a4f7Ac8F4C0890659A9",k,i),o=new T.CH("0x92978fb0Ed2c225f10Ede93E43D677CdbFE4039d",w,i);return e(o),t(s),i},o=async()=>{if(null==window?void 0:window.ethereum)try{a("isConnecting");let e=await window.ethereum.request({method:"eth_requestAccounts"}),t=await s();console.log(t);let n=await fetch("https://ahegao.love/api/getMessage",{method:"POST",body:JSON.stringify({address:e[0]}),headers:{"Content-Type":"application/json"}}),o=await n.json(),r=await t.signMessage(o.message),p=await fetch("https://ahegao.love/api/sign-in",{method:"POST",body:JSON.stringify({address:e[0],signature:r}),credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}});await p.json(),i(e[0]),a("isConnected")}catch(e){console.log(e),a("isDisconnected")}else window.open("https://metamask.app.link/dapp/".concat(null==window?void 0:window.location.host,"/stake"),"_blank").focus(),a("isDisconnected")},r=()=>{i(),a("isDisconnected")};return{connect:o,disconnect:r}};var j=n(7848);let C=()=>{let{account:e}=(0,g.useContext)(f.AccountContext);return(0,j.a)(["getTotalStake",e],async()=>{let e=await fetch("https://ahegao.love/api/getTotalStake",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();return t.num})},E=()=>{let{account:e}=(0,g.useContext)(f.AccountContext),{ERC721:t}=(0,g.useContext)(f.ContractContext);return(0,j.a)(["getTotalNFT",e],async()=>{if(!t)return 0;let e=await t.totalSupply();return e.toString()})},I=()=>{let{account:e}=(0,g.useContext)(f.AccountContext);return(0,j.a)(["getAllStake",e],async()=>{let e=await fetch("https://ahegao.love/api/getAllStake",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();return null==t?void 0:t.allStake})},S=()=>{let{account:e}=(0,g.useContext)(f.AccountContext);return(0,j.a)(["allNFT",e],async()=>{let e=await fetch("https://ahegao.love/api/getAllNFT",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();console.log(null==t?void 0:t.nfts);let n=null==t?void 0:t.nfts.sort((e,t)=>Number(e.tokenId)-Number(t.tokenId));return n})},M={1:20,2:69,3:169},R=e=>e>=12?4:e>=11?3.75:e>=10?3.5:e>=9?3.25:e>=8?3:e>=7?2.75:e>=6?2.5:e>=5?2.25:e>=4?2:e>=3?1.75:e>=2?1.5:e>=1?1.25:0,F=(e,t)=>M[t]*R(e)*30,_=(e,t)=>30*M[t]*R(e)*e;var U=n(9),D=n(8228);let z=()=>{let{account:e}=(0,g.useContext)(f.AccountContext),{ERC721:t,STAKE:n}=(0,g.useContext)(f.ContractContext),a=(0,D.D)(async()=>{if(t&&n&&e)try{let a=await n.getAddress(),i=await t.isApprovedForAll(e,a);if(i)return!0;let s=await t.setApprovalForAll(a,!0);return await s.wait(),!0}catch(e){throw console.log(e),e}});return a},O=e=>{let{nfts:t,month:n}=e,{STAKE:a}=(0,g.useContext)(f.ContractContext),{account:i,setStatus:s,setAccount:o}=(0,g.useContext)(f.AccountContext),r=(0,D.D)(async()=>{if(!a||!i)return;let e=t.map(e=>e.tokenId);try{let t=await a.getStakes(i,e),r=t.every(e=>!e[0]);if(r){let t=await a.stake(e,n),i=await t.wait();console.log(i)}let p=await fetch("https://ahegao.love/api/stake",{method:"POST",credentials:"include",body:JSON.stringify({tokenIds:e}),headers:{"Content-Type":"application/json"}});console.log(p);let l=await p.json();return(null==l?void 0:l.err)==="no user found"&&(o(""),s("isDisconnected"),alert("Your auth has expired")),l}catch(e){throw console.log(e),e}});return(0,g.useEffect)(()=>{r.isSuccess&&r.reset()},[r,r.isSuccess]),{...r}},G=()=>{let{STAKE:e}=(0,g.useContext)(f.ContractContext),{account:t}=(0,g.useContext)(f.AccountContext),n=(0,D.D)(async n=>{let{unstakes:a}=n;if(e&&t&&Array.isArray(a)&&a.length>0)try{let n=a.map(e=>e.tokenId),i=await e.getStakes(t,n),s=i.every(e=>e[0]);if(!s)throw"You don't own this NFT";try{let t=await e.unstake(n),a=await t.wait();console.log(a)}catch(e){throw(null==e?void 0:e.code)!=="ACTION_REJECTED"&&alert("Stake has not ended"),"User rejected"}let o=await fetch("https://ahegao.love/api/getStakeReward",{method:"POST",credentials:"include",body:JSON.stringify({tokenIds:n}),headers:{"Content-Type":"application/json"}}),r=await o.json();return console.log(r),!0}catch(e){throw console.log(e),"User rejected"}});return(0,g.useEffect)(()=>{n.isSuccess&&n.reset()},[n,n.isSuccess]),{...n}},B=()=>{let{account:e}=(0,g.useContext)(f.AccountContext);return(0,j.a)(["getUserPoint",e],async()=>{let e=await fetch("https://ahegao.love/api/getUserPoint",{method:"GET",credentials:"include",headers:{Accept:"application/json"}}),t=await e.json();return t.point})};var N=n(3100);let W=e=>{let{isOpen:t,onClose:n,body:i,isReady:o,isAlert:p}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.k,{display:t?"flex":"none",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"300px",height:"250px",flexDirection:"column",border:"1px solid #E686FF",bgColor:"rgba(230, 134, 255, 0.5)",color:"#E686FF",alignItems:"center",zIndex:3e3,borderRadius:"16px",children:[(0,a.jsx)(r.x,{fontSize:"28px",textAlign:"center",my:"50px",children:o&&!p?"Success":i}),!o&&(0,a.jsx)(u.$,{boxSize:"22px",color:"#E686FF"}),o&&(0,a.jsx)(l.z,{borderWidth:"0px",fontSize:"16px",px:"16px",py:"8px",borderRadius:"8px",fontWeight:"600",border:"1px solid #E686FF",color:"#E686FF",bgColor:"rgba(230, 134, 255, 0.1)",_hover:{bgColor:"rgba(230, 134, 255, 0.3)"},cursor:"pointer",onClick:async()=>{let e=await ethereum.request({method:"eth_chainId"});"1"===Number(e).toString()&&n()},children:"OK"})]}),(0,a.jsx)(N.xu,{display:t?"block":"none",bg:"rgba(0, 0, 0, 0.1)",backdropFilter:"blur(25px)",position:"fixed",top:"0",left:"0",width:"150vw",height:"150vh",zIndex:2e3})]})};var P=n(3924);let Q={color:"#E686FF",fontSize:"20px",fontWeight:"600"},J=()=>{var e;let{isMobile:t,screenWidth:n}=(0,P.Z)(),{account:A,status:T}=(0,g.useContext)(f.AccountContext),{connect:w}=v(),[k,j]=(0,g.useState)(!1),[M,D]=(0,g.useState)(-1),[N,J]=(0,g.useState)(""),[V,Y]=(0,g.useState)([]),[X,L]=(0,g.useState)([]),[q,K]=(0,g.useState)(!1),[Z,H]=(0,g.useState)(""),[$,ee]=(0,g.useState)(!1),[et,en]=(0,g.useState)(!1),[ea,ei]=(0,g.useState)(1),[es,eo]=(0,g.useState)(1),{data:er,refetch:ep}=C(),{data:el,refetch:eu}=E(),{data:ey,refetch:ed}=I(),{data:ec,refetch:em}=S(),{data:ex,refetch:eh}=B(),{mutate:eb,data:eg,isError:ef}=z(),{mutate:eA,data:eT,isError:ew}=O({nfts:X,month:null===(e=X[0])||void 0===e?void 0:e.month}),{mutate:ek,data:ev,isError:ej}=G();return(0,g.useEffect)(()=>{ef&&(H(""),K(!1),en(!1))},[ef]),(0,g.useEffect)(()=>{ew&&(H(""),K(!1),en(!1))},[ew]),(0,g.useEffect)(()=>{ej&&(H(""),K(!1),en(!1))},[ej]),(0,g.useEffect)(()=>{(async()=>{if(eg)try{eA()}catch(e){console.log(e)}})()},[eg,eA]),console.log(null==ey?void 0:ey.endTime),console.log(new Date(Date.parse(null==ey?void 0:ey.stakingEndDate)).toLocaleString()),(0,g.useEffect)(()=>{eT&&(console.log(eT),ep(),ed(),em(),eu(),Y([]),L([]),D(-1),J(""),en(!0)),ev&&(console.log(ev),ep(),ed(),em(),eu(),eh(),en(!0))},[eT,ev]),console.log(ec),console.log(ey),console.log(el),(0,g.useEffect)(()=>{"isConnected"===T&&j(!0),"isConnected"!==T&&j(!1)},[T]),(0,g.useEffect)(()=>{let e=e=>{"1"!==Number(e).toString()&&(H("Wrong chain. Please switch to Ethereum"),ee(!0),en(!0),K(!0))};(null==window?void 0:window.ethereum)&&window.ethereum.on("chainChanged",e)},[]),console.log(X),(0,g.useEffect)(()=>{k&&(console.log("chain"),window.ethereum.request({method:"eth_chainId"}).then(e=>{"1"!==Number(e).toString()&&(H("Wrong chain. Please switch to Ethereum"),ee(!0),en(!0),K(!0))}).catch(e=>{console.error("Error:",e)}))},[k]),(0,a.jsxs)(a.Fragment,{children:[k?(0,a.jsx)(i.W,{maxW:"1440px",m:"0 auto",pt:t?"100px":"150px",mb:"86px",children:(0,a.jsxs)(s.k,{w:"100%",columnGap:"30px",justifyContent:"center",flexDirection:t?"column":"row",rowGap:"50px",children:[(0,a.jsxs)(s.k,{flexDirection:"column",alignItems:"center",children:[(0,a.jsxs)(s.k,{position:"relative",w:"330px",flexDirection:"column",justifyContent:"center",children:[(0,a.jsx)(o.E,{src:b.src,alt:""}),(0,a.jsx)(r.x,{position:"absolute",top:"35px",left:"31px",zIndex:2,fontSize:"30px",color:"#E686FF",fontWeight:"1000",m:"0",children:null!=er?er:0})]}),(0,a.jsxs)(s.k,{mt:t?"30px":"50px",position:"relative",w:"400px",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.E,{w:"330px",src:x.src,alt:""}),(0,a.jsxs)(s.k,{flexDirection:"column",rowGap:"10px",w:"100%",position:"relative",children:[Array.isArray(ey)&&ey.length>0&&(0,a.jsxs)(s.k,{children:[(0,a.jsx)(p.I,{ml:"45px",type:"checkbox",onInput:e=>{e.target.checked?document.querySelectorAll(".unstake").forEach(e=>e.checked="checked"):document.querySelectorAll(".unstake").forEach(e=>e.checked=!1)}}),(0,a.jsx)(r.x,{...Q,ml:"15px",children:"Select All"})]}),Array.isArray(ey)&&ey.length>0&&ey.map((e,t)=>{var n,i,l;let{tokenId:u,endTime:y,media:d}=e;Date.now(),Date.parse(y);let c=null!==(l=null===(n=d[0])||void 0===n?void 0:n.thumbnail)&&void 0!==l?l:null===(i=d[0])||void 0===i?void 0:i.gateway;return(0,a.jsxs)(s.k,{alignItems:"center",w:"100%",children:[(0,a.jsx)(p.I,{className:"unstake",type:"checkbox",ml:"45px"}),(0,a.jsx)(o.E,{src:c,width:"50px",height:"50px",ml:"10px",alt:""}),(0,a.jsxs)(r.x,{color:"#E686FF",fontSize:"20px",ml:"10px",fontWeight:"600",w:"50px",children:["#",u]}),(0,a.jsx)(r.x,{color:"#E686FF",w:"100px",ml:"30px",fontSize:"20px",fontWeight:"600",flexShrink:"0",children:new Date(Date.parse(y)).toLocaleString()})]},t)}),(0,a.jsx)(l.z,{borderWidth:"0px",fontSize:"20px",mt:"20px",px:"16px",py:"8px",borderRadius:"8px",fontWeight:"600",border:"1px solid #E686FF",color:"#E686FF",bgColor:"rgba(230, 134, 255, 0.5)",alignSelf:"center",cursor:"pointer",onClick:()=>{let e=Array.from(document.querySelectorAll(".unstake")).map(e=>e.checked);if(e.every(e=>!e))return;let t=ey.filter((t,n)=>e[n]);ek({unstakes:t}),K(!0),H("Unlock your Ahegao...")},children:"Unlock"})]})]}),(0,a.jsxs)(s.k,{mt:t?"30px":"50px",position:"relative",w:"400px",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(o.E,{w:"330px",src:c.src,alt:""}),(0,a.jsxs)(s.k,{w:"263px",h:"254px",left:"64px",top:"81px",pl:"10px",py:"10px",position:"absolute",flexDirection:"column",rowGap:"10px",overflow:"auto",children:[Array.isArray(ec)&&ec.length>0&&(0,a.jsxs)(s.k,{children:[(0,a.jsx)(p.I,{type:"checkbox",onInput:e=>{e.target.checked?(Y(ec.map(e=>{var t,n,a;let{media:i,tokenId:s,rawMetadata:o}=e,r=null!==(a=null===(t=i[0])||void 0===t?void 0:t.thumbnail)&&void 0!==a?a:null===(n=i[0])||void 0===n?void 0:n.gateway,p=o.attributes,l=1;return p.forEach(e=>{"Font"===e.trait_type&&"Empty"!==e.value&&(l=2),"Special Edition"===e.trait_type&&(l=3)}),{tokenId:s,image:r,level:l}})),document.querySelectorAll(".stake").forEach(e=>e.checked="checked")):(Y([]),document.querySelectorAll(".stake").forEach(e=>e.checked=!1))}}),(0,a.jsx)(r.x,{...Q,ml:"15px",children:"Select All"})]}),Array.isArray(ec)&&ec.length>0&&ec.map(e=>{var t,n,i;let{media:l,tokenId:u,rawMetadata:y}=e,d=null!==(i=null===(t=l[0])||void 0===t?void 0:t.thumbnail)&&void 0!==i?i:null===(n=l[0])||void 0===n?void 0:n.gateway,c=y.attributes,m=1;return c.forEach(e=>{"Font"===e.trait_type&&"Empty"!==e.value&&(m=2),"Special Edition"===e.trait_type&&(m=3)}),(0,a.jsxs)(s.k,{alignItems:"center",children:[(0,a.jsx)(p.I,{className:"stake",type:"checkbox",onInput:e=>{e.target.checked?Y([...V,{tokenId:u,image:d,level:m}]):Y(e=>e.filter(e=>e.tokenId!==u))}}),(0,a.jsx)(o.E,{src:d,ml:"15px",width:"50px",height:"50px",alt:""}),(0,a.jsxs)(r.x,{ml:"30px",...Q,children:["#",u]}),(0,a.jsx)(r.x,{ml:"60px",...Q,fontSize:"16px",children:V.map(e=>e.tokenId).includes(u)&&"Select"})]},u)})]}),(0,a.jsxs)(r.x,{position:"absolute",left:"128px",bottom:"119px",fontWeight:"800",color:"rgb(200, 200, 200)",fontSize:"12px",children:[ea," month","1"!==ea?"s":""]}),(0,a.jsx)(r.x,{position:"absolute",left:"230px",bottom:"119px",fontWeight:"800",color:"rgb(200, 200, 200)",fontSize:"12px",children:R(ea)}),(0,a.jsx)(p.I,{type:"range",min:"1",step:"1",max:"12",position:"absolute",width:"260px",left:"57px",bottom:"90px",value:ea,onInput:e=>{ei(e.target.value)}}),(0,a.jsx)(o.E,{_hover:{transform:"scale(1.05)"},cursor:"pointer",position:"absolute",bottom:"40px",left:"56px",width:"180px",src:m.src,alt:"",onClick:()=>{t&&document.querySelector("#confirm").scrollIntoView({behavior:"smooth"});let e=V.map(e=>({...e,month:ea,total:_(ea,e.level),point:F(ea,e.level),weight:R(ea)}));L(e.sort((e,t)=>Number(e.tokenId)-Number(t.tokenId)))}})]})]}),(0,a.jsxs)(s.k,{flexDirection:"column",alignItems:"center",id:"confirm",children:[(0,a.jsxs)(s.k,{position:"relative",w:"330px",flexDirection:"column",justifyContent:"center",children:[(0,a.jsx)(o.E,{src:h.src,alt:""}),(0,a.jsxs)(r.x,{position:"absolute",top:"35px",left:"31px",zIndex:2,fontSize:"30px",color:"#E686FF",fontWeight:"1000",m:"0",children:[el?(er/el*100).toFixed(2):0," %"]})]}),(0,a.jsxs)(s.k,{mt:t?"30px":"50px",position:"relative",w:"330px",flexDirection:"column",justifyContent:"center",children:[(0,a.jsx)(o.E,{src:y.src,alt:""}),Array.isArray(X)&&X.length>0&&(0,a.jsx)(s.k,{w:"246px",h:"224px",left:"27px",top:"121px",position:"absolute",flexDirection:"column",alignItems:"center",columnGap:"20px",pl:"5px",overflow:"auto",rowGap:"15px",overflowX:"hidden",...Q,children:X.map((e,t)=>(0,a.jsxs)(s.k,{alignItems:"center",w:"100%",columnGap:"12px",children:[(0,a.jsxs)(r.x,{children:["#",e.tokenId]}),(0,a.jsx)(o.E,{width:"50px",height:"50px",src:e.image,alt:""}),(0,a.jsxs)(s.k,{flexDirection:"column",fontSize:"14px",whiteSpace:"nowrap",children:[(0,a.jsxs)(r.x,{children:["Month: ",e.month]}),(0,a.jsxs)(r.x,{children:["Weight: ",e.weight]})]}),(0,a.jsxs)(r.x,{fontSize:"14px",ml:"10px",children:["Point: ",e.total]})]},t))}),Array.isArray(X)&&X.length>0&&(0,a.jsx)(s.k,{w:"245px",h:"23px",left:"30px",top:"389px",position:"absolute",alignItems:"center",pl:"5px",...Q,children:(0,a.jsx)(r.x,{fontSize:"14px",children:X.reduce((e,t)=>e+t.point,0)})}),(0,a.jsx)(o.E,{_hover:{transform:"scale(1.05)"},cursor:"pointer",position:"absolute",bottom:"38px",left:"66px",width:"180px",src:d.src,alt:"",onClick:()=>{X.length<=0||(eb(),K(!0),H("Staking your Ahegao..."))}})]}),(0,a.jsxs)(s.k,{flexDirection:"column",p:"10px",...Q,fontSize:"14px",children:[(0,a.jsx)(r.x,{children:"Account:"}),(0,a.jsx)(r.x,{children:A}),(0,a.jsxs)(r.x,{children:["Point: ",ex]})]})]})]})}):(0,a.jsx)(s.k,{maxW:"1440px",m:"auto",h:"calc(100vh - 106px)",alignItems:"center",justifyContent:"center",children:(0,a.jsxs)(l.z,{w:"330px",h:"70px",borderRadius:"16px",fontSize:"20px",fontWeight:"800",bgColor:"transparent",color:"rgb(200, 200, 200)",borderWidth:"0px",cursor:"isConnecting"===T?"default":"pointer",_hover:{filter:"isConnecting"===T?"brightness(1)":"brightness(1.1)"},onClick:w,isDisabled:"isConnecting"===T,children:["isConnecting"===T?(0,a.jsxs)(s.k,{zIndex:"1",alignItems:"center",columnGap:"16",children:[(0,a.jsx)(r.x,{fontSize:"18px",children:"Check on your Metamask"}),(0,a.jsx)(u.$,{boxSize:"16px"})]}):(0,a.jsx)(r.x,{zIndex:"1",children:"Connect with Metamask"}),(0,a.jsx)(U.Z,{})]})}),(0,a.jsx)(W,{isOpen:q,onClose:()=>{K(!1),en(!1),ee(!1)},body:Z,isReady:et,isAlert:$})]})},V=()=>(0,a.jsx)(J,{});var Y=V},5856:function(){}},function(e){e.O(0,[328,774,888,179],function(){return e(e.s=2567)}),_N_E=e.O()}]);